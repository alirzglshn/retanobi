{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لیست کمپین‌ها</title>

  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

  
  <link rel="stylesheet" href="{% static 'css/campaigns.css' %}">
</head>
<body>

<div class="container my-5">
  <aside class="sidebar">
            
            <ul class="nav-menu">
                <li>
                    <a href="{% url 'dashboard-view' %}" style="color: black; text-decoration: none;">داشبورد</a>
                </li><form method="get" class="input-group mb-4">
    <button class="btn btn-search" type="submit">جست و جو</button>
    <input type="text" name="rule" class="form-control" placeholder="شماره رولز خود را وارد فرمایید...">
  </form>
                <li> 
                    <a href="{% url 'account-page' %}" style="color:black; text-decoration: none"> حساب کاربری </a>
                </li>
                <li>
                    <a href="{% url 'campaign-create' %}" style="color:black; text-decoration: none"> ایجاد کمپین </a>
                </li>
                <li class="active">
                    <a href="{% url 'campaign-list' %}" style="color:black; text-decoration: none"> فهرست کمپین </a>
                </li>
                <li >
                    <a href="{% url 'ticket-list' %}" style="color:black; text-decoration: none"> فهرست تیکت ها   </a>
                </li>
            </ul>
        </aside>
  
  <div class="d-flex justify-content-between align-items-center mb-4">
    <span class="text-muted">
      کمپین‌های ایجاد شده: <strong>{{ campaigns|length }}</strong>
    </span>

    <a href="{% url 'campaign-create' %}" class="btn btn-create">
      ایجاد کمپین جدید
    </a>
  </div>

  
  <!-- <form method="get" class="input-group mb-4">
    <button class="btn btn-search" type="submit">جست و جو</button>
    <input type="text" name="rule" class="form-control" placeholder="شماره رولز خود را وارد فرمایید...">
  </form> -->

  
  <div class="row table-head d-none d-md-flex">
    <div class="col">جزئیات</div>
    <div class="col">الگوی پیام</div>
    <div class="col">فعال بودن کمپین</div>
    <div class="col">منبع محصولات</div>
    <div class="col">جنسیت</div>
    <div class="col">نوع فعال‌سازی</div>
    <div class="col">هفته</div>
    <div class="col">شماره رولز</div>
  </div>

  {% for campaign in campaigns %}
  <div class="campaign-item">
    <div class="row align-items-center text-center text-md-start">

      <div class="col">
        <a href="{% url 'campaign-detail' campaign.id %}" class="btn btn-details">مشاهده</a>
      </div>

      <div class="col">
        {{ campaign.message_pattern|default:"—"|truncatechars:30 }}
      </div>

      <div class="col">
        {% if campaign.is_active %}
          <span class="badge bg-success">هست</span>
        {% else %}
          <span class="badge bg-danger">نیست</span>
        {% endif %}
      </div>

      <div class="col">{{ campaign.product_source }}</div>
      <div class="col">{{ campaign.gender }}</div>
      <div class="col">{{ campaign.activation_base }}</div>
      <div class="col">{{ campaign.week }}</div>
      <div class="col text-muted">{{ campaign.rule_number }}</div>

    </div>
  </div>
  {% empty %}
    <div class="alert alert-warning text-center mt-4">
      هنوز هیچ کمپینی ایجاد نشده است.
    </div>
  {% endfor %}

</div>

</body>
</html>